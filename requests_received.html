<!DOCTYPE html>
<html>
<title>Requests Recieved</title>
<head>
    <style>
            .button-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            position: relative;
            top: 8vh;
            }

            .button-container h2 {
            margin-right: 20px;
            }

            .button-container .buttons {
            display: flex;
            gap: 10px; 
            }

            .button-container .buttons .btn {
            margin-left: 5px;
            }

            .button-container .btn {
            margin-left: 10px;
            }

            .leave-table {
            width: 100%;
            border-width: 10px;
            margin-top: 20px;
            }

            .leave-table th, .leave-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
            }

            .leave-table th {
            background-color: rgb(21, 21, 150);
            color: white;
            }

            .leave-table tbody tr:nth-child(even) {
            background-color: #f9f9f9;
            }

            .approve-btn, .reject-btn {
            padding: 5px 10px;
            cursor: pointer;
            }

            .approve-btn {
            background-color: #5cb85c;
            color: #fff;
            border-radius: 45%;
            }

            .approve-btn:hover {
            background-color: rgb(12, 117, 12);
            }

            .reject-btn {
            background-color: #ff0800;
            color: #fff;
            border-radius: 45%;
            }

            .reject-btn:hover {
                background-color: rgb(130, 16, 16);
            }

            .btn {
                background-color: rgb(6, 6, 162);
                border: none;
                padding: 5px 10px;
                text-decoration: none;
                border-radius: 20px;
                cursor: pointer;
            }
            .btn a{
                color: #fff;
                text-decoration: none;
            }
            .btn:hover {
                background-color: rgb(0, 0, 88);
            }
            .main-container{
      margin-top: 15vh;
  }
  .form-group{
          margin-right : 50px;
          display : inline-block;
      }
      table {
          width: 100%;
          border-collapse: collapse;
          margin-top: 20px;
        }
    
        th, td {
          border: 1px solid #ddd;
          padding: 8px;
          text-align: left;
        }
    
        th {
          background-color: #f2f2f2;
        }
          .top-nav {
            height: 5vh;
            background-color: #72bcd9;
            color: rgb(61, 42, 132);
            text-align: center;
            padding: 10px;
            font-size: 24px;
            position: fixed;
            width: 100%;
            border-radius: 1vh;
        }
        nav {
            height: 4vh;
            width: 100%;
            background-color: #e5d3ff;
            position: fixed;
            margin-top: 5vh;
            align-items: center;
            border-radius: 1vh;
            justify-content: flex-end;
        }

        nav a {
            padding-right: 2vh;
            position: relative;
            top:1vh;
            text-decoration: none;
            font-weight: bold;
            font-size: 1rem;
            color: rgb(13, 2, 72);
        }
        @media (max-width: 768px) {
            .top-nav {
                /* padding-left: 50px; Adjusted for menu button */
                font-size: 1rem;
                width: 100%;
                height: 3vh;
            }

            nav a{
              padding-left: 1vh;
            
            }
            nav {
              height: 3vh;
                left: 0; /* Adjusted width for mobile screens */
                width: 100%;
            }


        }
    .container{
      position: relative;
      top: 8vh;
    }
            
    </style>
</head>
<body>
<script>
</script>
<div class="top-nav">
  Jawaharlal Nehru Technological University Gurajada Vizianagaram
</div>
<nav align="right">
  <a href="{% url 'index' %}">Home</a>
<a href="{% url 'leave_application' %}">Leave Application</a>
<a href="{% url 'leave_history' %}">Leave History</a>
<!-- {% if faculty.designation == "Principal" or faculty.designation == "HOD" %} -->
<a href="{% url 'report_generator' %}">Report Generator</a>
<a href="{% url 'requests_received' %}">Requests Received</a>
<!-- {% endif %} -->
</nav>
<div class="button-container" style="padding-left: 2%; padding-right: 2%;">
    <h2>Leave History</h2>
    <div>
    
    </div>
  </div> 
 <div class="container">
  <section id="requests_received">
    <div style="padding-left: 2%; padding-right: 2%;">
        <h1>Requests Received</h1>
        <table class="leave-table" id="requests-table">
          <thead>
            <tr>
              <th>Leave ID</th>
              <th>Employee ID</th>
              <th>Name</th>
              <th>Start Date</th>
              <th>End Date</th>
              <th>Reason</th>
              <th>Type of Staff</th>
              <th>Type of Leave</th>
              <th>Approve / Reject</th>
            </tr>
            <tr>
              <td>column1</td>
              <td>column2</td>
              <td>column3</td>
              <td>column4</td>
              <td>column5</td>
              <td>column6</td>
              <td>column7</td>
              <td>column8</td>
              <td>column9</td>
            </tr>
          </thead>
            <tbody id="requests-body">
            </tbody>
            </table>
          </div>
        </section>
 </div>
  <script>
    tableBody = document.getElementById('requests-body');
    rows=[
    { employeeId: '000', name: "Emp1", startDate: '2024-01-10', endDate: '2024-01-15', reason: 'Vacation', typeOfStaff: 'Teaching',  typeOfLeave: 'Maternity',   },
      { employeeId: '002',name: "Emp1", startDate: '2024-01-10', endDate: '2024-01-15', reason: 'Vacation', typeOfStaff: 'Teaching',  typeOfLeave: 'Maternity',  },
      { employeeId: '002',name: "Emp1", startDate: '2024-01-10', endDate: '2024-01-15', reason: 'Vacation', typeOfStaff: 'Teaching',  typeOfLeave: 'Maternity',  },
      { employeeId: '002',name: "Emp1", startDate: '2024-01-10', endDate: '2024-01-15', reason: 'Vacation', typeOfStaff: 'Teaching',  typeOfLeave: 'Maternity',  },
    ];
    var rows = JSON.parse('{{ leave_rows|escapejs }}');
    function addRowsWithAnimation() {
      rows.forEach((request, index) => {
        setTimeout(() => {
          row = createRow(request);
          tableBody.appendChild(row);
          row.classList.add('fade-in');
        }, index * 100);
      });
    }

    function createRow(request) {
      const row = document.createElement('tr');
      for (const key in request) {
        if (Object.hasOwnProperty.call(request, key)) {
          const cell = document.createElement('td');
          cell.textContent = request[key];
          row.appendChild(cell);
        }
      }
      const actionsCell = document.createElement('td');
      const approveButton = document.createElement('button');
      approveButton.textContent = 'Approve';
      approveButton.classList.add('approve-btn');
      const rejectButton = document.createElement('button');
      rejectButton.textContent = 'Reject';
      rejectButton.classList.add('reject-btn');
      actionsCell.appendChild(approveButton);
      actionsCell.appendChild(rejectButton);
      row.appendChild(actionsCell);
      return row;
    }
    document.addEventListener('click', function (event) {
      const isApproveBtn = event.target.classList.contains('approve-btn');
      const isRejectBtn = event.target.classList.contains('reject-btn');

      if (isApproveBtn) {
        const row = event.target.closest('tr');
        fetch('/approve/', {
          method: 'POST',
          headers: {
              'Content-Type': 'application/x-www-form-urlencoded',
              // Include any additional headers if needed
          },
          body: 'your_value=' + encodeURIComponent(5),
      })
        alert('Approved successfully');
      } else if (isRejectBtn) {
        alert('Rejected successfully');
      }

      if (isApproveBtn || isRejectBtn) {
        const row = event.target.closest('tr');
        row.remove();
      }
    });

    window.onload = addRowsWithAnimation;

</script>


</body>
</html>
